<style>
  .email-gadget-container {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    padding: 25px;
    border-radius: 12px;
    font-family: Arial, sans-serif;
    text-align: center;
  }
  .email-gadget-icon svg {
    width: 45px;
    height: 45px;
    fill: #333;
    margin-bottom: 12px;
  }
  .email-gadget-title {
    font-size: 1.25em;
    font-weight: bold;
    color: #2c3e50;
    margin: 0 0 8px 0;
  }
  .email-gadget-desc {
    font-size: 0.9em;
    color: #34495e;
    margin-bottom: 20px;
  }
  .email-gadget-form input[type="email"] {
    width: 100%;
    padding: 12px;
    border: 1px solid #bdc3c7;
    border-radius: 8px;
    box-sizing: border-box;
    margin-bottom: 12px;
    text-align: center;
  }
  .email-gadget-form button {
    width: 100%;
    background-color: #2980b9;
    color: white;
    font-weight: bold;
    padding: 12px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  .email-gadget-form button:hover {
    background-color: #3498db;
  }
  .email-gadget-gmail-btn {
    display: inline-block;
    margin-top: 15px;
    font-size: 0.85em;
    color: #7f8c8d;
    text-decoration: none;
  }
  .email-gadget-gmail-btn:hover {
    text-decoration: underline;
  }
  #email-gadget-success-msg {
    color: #27ae60;
    font-weight: bold;
    padding: 15px;
    border: 1px solid #27ae60;
    background-color: #eaf8f1;
    border-radius: 8px;
  }
</style>

<div class="email-gadget-container">
  <div class="email-gadget-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0l-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"/></svg>
  </div>
  <h3 class="email-gadget-title">Jangan Ketinggalan Info!</h3>
  <p class="email-gadget-desc">Daftarkan email Anda untuk mendapatkan artikel terbaru dari kami.</p>

  <div id="email-gadget-success-msg" style="display:none;">
    Terima kasih! Email Anda berhasil didaftarkan.
  </div>

  <form id="email-gadget-form" class="email-gadget-form">
    <input type="email" id="email-input" placeholder="Ketik email Anda di sini..." required>
    <button type="submit" id="submit-button">Langganan</button>
  </form>

  <a href="https://mail.google.com" target="_blank" class="email-gadget-gmail-btn">
    Buka Gmail untuk Cek Info
  </a>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('email-gadget-form');
  const successMessage = document.getElementById('email-gadget-success-msg');
  const submitButton = document.getElementById('submit-button');

  // GANTI URL INI dengan URL Web App dari Google Apps Script Anda
  const SCRIPT_URL = 'URL_WEB_APP_ANDA_DARI_LANGKAH_1';

  form.addEventListener('submit', function(e) {
    e.preventDefault(); // Mencegah form reload halaman
    
    submitButton.disabled = true;
    submitButton.textContent = 'Mengirim...';

    const email = document.getElementById('email-input').value;
    const formData = new FormData();
    formData.append('email', email);

    fetch(SCRIPT_URL, {
      method: 'POST',
      body: formData
    })
    .then(response => response.json())
    .then(data => {
      if (data.result === 'success') {
        form.style.display = 'none'; // Sembunyikan form
        successMessage.style.display = 'block'; // Tampilkan pesan sukses
      } else {
        alert('Oops! Terjadi kesalahan: ' + data.message);
        submitButton.disabled = false;
        submitButton.textContent = 'Langganan';
      }
    })
    .catch(error => {
      alert('Terjadi kesalahan jaringan. Silakan coba lagi.');
      submitButton.disabled = false;
      submitButton.textContent = 'Langganan';
    });
  });
});
</script>